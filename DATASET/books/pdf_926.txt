Découverte de chroniques à partir de séquences d’événements pour la supervision de processus dynamiques Nabil Benayadi Marc Le Goc Philippe Bouché LSIS UMR CNRS 6168 Université Paul Cézanne Domaine Universitaire St Jérôme 13397 Marseille cedex 20 France {nabil benayadi marc legoc philippe bouche} lsis org Résumé Ce papier adresse le problème de la découverte de connaissances tem porelles à partir des données datées générées par le système de supervision d’un processus de fabrication Par rapport aux approches existantes qui s’appliquent directement aux données notre méthode d’extraction des connaissances se base sur un modèle global construit à partir des données L’approche de modélisation adoptée dite stochastique considère les données datées comme une séquence d’occurrences de classes d’événements discrets Cette séquence est représentée sous les formes duales d’une chaîne de Markov homogène et d’une superpo sition de processus de Poisson L’algorithme proposé appelé BJT4R permet d’identifier les motifs séquentiels les plus probables entre deux classes d’évé nements discrets et les représentent sous la forme de modèles de chroniques Ce papier présente les premiers résultats de l’application de cet algorithme sur des données générées par un processus de fabrication de semi conducteur d’un site de production du groupe STMicroelectronics1 1 Introduction Le problème de la découverte des modèles temporels caractérisant le comportement des systèmes dynamiques est un enjeu majeur pour les tâches de contrôle et de surveillance La raison de base réside dans la difficulté des experts humains d’apprendre et de formuler leurs connaissances sur la dynamique de ces processus La surveillance est effectuée à partir d’un ensemble d’observations séquences d’occurrences d’événements discret produites par le sys tème de pilotage Les séquences d’observations remontées par le système de supervision sont porteuses de connaissances temporelles sur les relations causales entre les différentes variables du processus Notre approche est centrée sur la découverte des séquences particulières d’événements signe d’un comportement particulier Nous proposons de représenter le comportement du sys tèmes sous la forme de chroniques un formalisme graphique pour la représentation des motifs 1Ce papier a été effectué sous l’aide financière de la Communauté du Pays d’Aix de conseil général de Bouches du Rhône conseil régional de Provence Alpes Côte d’Azur et du STMicroelectronics Zone Industrielle de Rousset 13106 ROUSSET cedex France Découverte de chroniques pour la supervision de processus dynamiques temporels où les noeuds sont les classes d’événements et les arcs représentent les contraintes temporelles liant les classes d’événements Dousson et Duong 1999 Ghallab 1996 Ce choix de représentation s’est révélé particulièrement adapté à la représentation des évolutions de systèmes dynamiques tout en maintenant une complexité raisonnable pour le traitement en temps réel des occurrences d’événements pour la supervision Notre méthode de découverte des chroniques se déroule en deux phases la première phase consiste à modéliser la séquence d’événements discrets en intégrant l’approche stochastique proposée par Le Goc et Bouché 2005 Cette approche est basée sur la représentation d’une séquence d’événements discrets sous les formes duales d’une chaîne de Markov homogène et une superposition de processus de Poisson Dans la deuxième phase nous proposons un algorithme appelé BJT4R Back ward Jump with Timed constraints For Roads destiné à la découverte des chroniques à partir du modèle obtenu durant la première phase L’algorithme BJT4R est une extension de l’al gorithme Viterbi Viterbi 1967 aux chaînes de Markov basé sur l’application de la relation Chapmann Kolmogorov comme fonctionnelle de coût La section suivante présente les principales approches de découverte des motifs séquentiels à partir de données datées La section 3 introduit l’approche de modélisation adoptée dans la section 4 nous présentons l’algorithme BJT4R Les résultats préliminaires pour la découverte des processus de fabrication des wafers sont présentés dans la section 5 La conclusion de ce papier évoque les prochaines étapes de travail 2 Contexte La problématique générale est la suivante étant donné un ensemble de comportements particuliers ou ordinaires observés dans une série d’expériences quelles sont les modèles tem porels qui caractérisent au mieux ces comportements Des questions similaires ont été traitées dans le domaine de Fouille de Données Temporel Introduits pour la première fois dans Agrawal et Srikant 1995 les motifs séquentiels peuvent être vus comme une extension de la notion des règles d’associations Agrawal et al 1993 intégrant la notion de temps Dans Agrawal et Srikant 1995 les auteurs proposent une approche permettant la découverte des motifs séquentiels à partir de bases de données contenant des séquences de transaction d’achat effectuées par des clients Une séquence est constituée de plusieurs transactions réalisées par un client Une transaction est caractérisée par un identifiant une date de transaction et l’ensemble des produit achetés appelés ItemSet Le problème de la découverte de motifs séquentiels consiste à rechercher l’ensemble des sé quences ayant des supports supérieurs à un certain seuil minimal Un ensemble d’algorithmes ont été tirés de cette approche fréquentielle AppioriAll ApprioriSome et DynamicSome Ces algorithmes de recherche des motifs séquentiels présentent quelques limites concernant la prise en compte des contraintes temporelles Ce problème a conduit à la recherche des séquences généralisées définies dans Srikant et Agrawal 1996 Cette technique de recherche permet d’obtenir des motifs séquentiels respectant certaines contraintes temporelles définies par l’uti lisateur par exemple regroupement des achats lorsque leurs dates sont assez proches consi dération des Itemsets achats comme trop rapprochés pour apparaître dans le même motif fréquent Dans Mannila et al 1997 les auteurs abordent le problème de la découverte des motifs temporels appelés épisodes fréquemment contenus dans une séquence d’occurrence d’événe N Benayadi et al ments Dans cette approche un événement est le couple A t où A ∈ E est un type d’évé nement appartenant à l’ensemble des types d’événements E et t représente la date d’occur rence de type d’événement A Une séquence d’événements dans E est un triplet s Ts Te où s = 〈 A1 t1 A2 t2 An tn 〉 est une suite ordonnée d’événements Ai ∈ E pour tout i = 0 n− 1 ti ≤ ti+1 et Ts et Te représentent la date de début et de fin de la séquence tel que Ts ≤ ti ≤ ti+1 ≤ Te pour tout i < n Un épisode est une collection d’événements appa raissant relativement proches entre eux dans un ordre partiel Deux types d’épisode ont été définis les épisodes parallèles où l’ordre des occurrences des événements dans les épisodes n’est pas porteur de sens et les épisodes séquentiels ou les occurrences des événements sont complètement ordonnées par leurs dates d’occurrence La méthode de découverte des épisodes fréquents est basée sur la notion de fenêtre temporelle définie à travers une séquence s Ts Te Une fenêtre temporelle est un triplet w ts te où ts ≤ Te et te ≥ Ts et w contient des couples A t de la séquence s ou ts ≤ t ≤ te La durée te− ts est appelée la largeur de la fenêtre tem porelle Étant donnée une fenêtre temporelle et un épisode α la fréquence de l’épisode α est le rapport du nombre des fenêtres où α apparaît sur le nombre total des fenêtres dans la sé quence Le problème de la découverte des motifs temporels consiste à extraire les épisodes ayant une fréquence d’apparition supérieure à un certain seuil minimal Algorithme Winapi Par contre la taille des épisodes ainsi découverts est liée à la largeur de la fenêtre temporelle Pour éviter ce problème une notion d’occurrence minimale a été introduite par Mannila et al 1997 Algorithme Minepi Étant donné un épisode α l’intervalle [ts te] est une occurrence minimale de α dans la séquence s Ts Te si α apparaît dans [ts te] et α n’appartient à aucun sous intervalle de [ts te] Lorsque les épisodes ont été découverts des règles sont déduites afin de décrire ou de prédire toute ou partie d’une séquence Cette méthode proposée traite le temps d’une manière implicite la seule contrainte temporelle qu’elle autorise est une borne maxi male la largeur de la fenêtre temporelle sur la durée des épisodes celle ci devant être fixée par l’utilisateur Par contre les contraintes temporelles liant les éléments des épisodes ainsi découverts sont ignorées Ghallab 1996 propose une méthode permettant la découverte des modèles de chroniques à partir d’un ensemble de séquences d’alarmes divisées en deux sous ensembles un ensemble de séquences positives exemples et un ensemble de séquences néga tives contre exemples L’idée générale de la méthode est de considérer dans un premier temps les séquences d’événements comme des suites ordonnées sans tenir compte l’aspect temporel Ceci revient à conserver l’ordonnancement des événements et à supprimer toute notion de temps Une fois les séquences dépourvues des écarts temporels on détermine les chroniques les plus longues qui sont communes à tous les exemples et qui ne sont pas reconnues par les contres exemples Pour les motifs séquentiels découverts les contraintes temporelles entre les éléments de modèles peuvent être déterminées par les experts ou par le calcul des écarts minimaux et maximaux entre chaque couple de deux alarmes afin d’englober toutes les oc currences de ces deux types d’alarmes Une autre approche proposée par Dousson et Duong 1999 permettant la découverte des modèles de chroniques à partir d’une séquence d’alarmes appelée journal d’alarmes Cette approche repose sur une analyse fréquentielle de la séquence d’alarmes visant à identifier les formes temporelles récurrentes Cette méthode est une exten sion de l’approche proposée par Mannila et al 1997 Algorithme Minepi par l’introduction des contraintes temporelles entre les alarmes Dans un article plus récent Mannila 2002 dresse un bilan des principales limites des ap proches présentées et identifie le principal défaut les relations entre les éléments des modèles Découverte de chroniques pour la supervision de processus dynamiques que ces algorithmes permettent de découvrir sont trop locales pour constituer une véritable représentation de la séquence étudiée Il invite donc à rechercher des algorithmes adoptant un point de vue plus global Le Goc et Bouché 2005 proposent ainsi une approche stochastique globale permettant la modélisation des séquences d’événements discrets générées par un sys tème à base de connaissances de surveillance et de diagnostic de processus dynamiques Cette approche est basée sur la représentation d’une séquence d’événements discrets sous les formes duales d’une chaîne de Markov homogène et d’une superposition de processus de Poisson 3 Modélisation de séquences Approche Stochastique Soit X = {xk t }k∈ℵ est un ensemble de variables xk t est une fonction définie sur ℜ Dans l’approche stochastique une séquence ω = {ok}k=0 m−1 est une suite ordonnée de m occurrences ok ≡ tk x i d’événements discrets ek ≡ x i où x est une variable i ∈ Ix ⊆ ℵ est une valeur discret de x t et tk ∈ Γ = {ti} ti ∈ ℜ est le temps d’affectation de la valeur i à la variable x tel que une occurrence ok ≡ tk x i correspond à l’affectation x t = i Les occurrences sont datées selon une horloge à temps continu i e tk−1− tk−2 6= tk− tk−1 ∀tk ∈ℜ ∀i ∈ Ix ∈ℵ ∃tk−1 < tk x tk−1 ∈ i∧ x tk ∈ i⇒ ok ≡ tk x i 1 Soit E = {ek}k∈ℵ l’ensemble des événements définit dans X× Ix et Γ = {ti}ti∈ℜ l’ensemble des dates d’occurrences définit dans ℜ Nous notons Eo = {ok}k∈ℵ ok ≡ tk x i l’ensemble des occurrences d’événements discrets défini dans Γ×E Soit d une fonction qui renvoie la date d’occurrence d’un événement d Eo 7→ Γ ∀ok ≡ tk x i ∈ Eo d ok = tk 2 Le couple ok ok+1 de deux occurrences successives liées à une même variable x décrit l’évolution temporelle de la fonction x t définie dans [tk tk+1[ ∀ok ≡ tk x i ok+1 ≡ tk+1 x j ∈ ω ok ok+1 ⇒∀t ∈ [tk tk+1[ x t = i∧ x tk+1 = j 3 Par conséquence une séquence ω = {ok}k=0 m−1 d’occurrences d’événements discrets ok ≡ tk x i qui concerne la variable x décrit l’évolution temporelle de la fonction discrète x t définie dans ℵ Une classe d’événement discret est l’ensemble C j = {ei} d’événements discrets ei ≡ x i Nous allons utiliser la notation ”ei C j” pour noter que l’événement discret ei appartient à la classe d’événement C j Par extension nous notons ”oi C j” une occurrence d’un événe ments discret appartenant à la classe C j La relation binaire R Ci Co [τ− τ+] décrit la rela tion orientée entre deux classes d’événements discrets contraintes temporellement ” [τ− τ+]” est un intervalle de temps pour observer une occurrence de la classe de sortie Co après l’occur rence de la classe d’entrée Ci R Ci Co [τ− τ+] ⇔∃on ok ∈ ω ⊆Ω on Co ∧ ok Ci ∧ d on −d ok ∈ [τ− τ+] 4 N Benayadi et al Dans ce contexte un modèle de chroniques est un ensemble de relations binaires temporel lement contraintes entre des classes d’événements discrets Le modèle de chronique M123 =< R12 C1 C2 [τ−12 τ + 12] R23 C 2 C3 [τ−23 τ + 23] > définit deux relations binaires entre trois classes d’événements discrets vérifiant la relation suivante ∃ok on om ∈Ω ok C1 ∧ on C2 ∧ om C3 ∧ d on −d ok ∈ [ τ−12 τ + 12 ] ∧ d om −d on ∈ [ τ−23 τ + 23 ] 5 La figure 1 montre une représentation graphique de modèle de chronique M123 représenté dans le "Langage ELP" Frydman et al 2001 Le Goc et al 2006 [ ]+− 1212 ττ [ ]+− 2323 ττ 1 C 2 C 3 C [ ]+− 1212 ττ [ ]+− 2323 ττ 1 C 1 C 2 C 2 C 3 C 3 C FIG 1 – Représentation graphique de M123 Un modèle de chroniques peut être utilisé dans une tâche de diagnostic pour la prédiction d’une occurrence d’une classe particulière dans une séquence Comme la classe d’événement C3 dans le modèle M123 ∀ω ⊆Ω ∀ok on ∈ ω ok C1 ∧ on C2 ∧ d on −d ok ∈ [ τ−12 τ + 12 ] ⇒∃om ∈ ω om C3 ∧ d om −d on ∈ [ τ−23 τ + 23 ] 6 L’approche stochastique considère une séquence ω des occurrences de classes d’événe ments discrets comme une séquence de transition d’états d’un automate stochastique tempo rel Lorsque les classes d’événements sont indépendantes et la distribution des durées inter occurrences suit une distribution exponentielle f t = 1− e−λ t où λ est le taux de poisson nombre moyen d’occurrences des événements par unité de temps alors l’automate stochas tique peut être représenté sous les formes duales d’une chaîne de Markov homogène et d’une superposition de processus de poisson Afin de représenter une séquence comme une chaîne de Markov X = X tk k≥ 0 l’ensemble des classes d’événements discrets Cω = { Ci } i=0 n−1 de la séquence ω = ok Ci k=0 m est confondu avec l’espace d’états SM = {i}i=0 n−1 de la chaîne de Markov La relation binaire ω ′ = ok−1 Ci ok C j dans la séquence ω est corres pond à la transition d’états dans la chaîne de Markov X d ok−1 Ci = i→X d ok C j = j Lorsque la chaîne de Markov est homogène la probabilité de transition d’un état i à la date tk−1 vers l’état j à la date tk dépend uniquement des états i et j ∀k > 0 ∈ℵ P [X tk = j|X tk−1 = i] = P[ j|i] = pi j 7 Le processus de comptage des transitions d’états dans une chaîne de Markov homogène est un processus de Poisson Ni j t t ≥ 0 où Ni j t compte le nombre des transitions X tk−1 = i→ X tk = j de l’état i vers l’état j C’est le nombre de sous séquences ω ′ = ok−1 Ci ok C j dans la séquence ω Le processus de Poisson Ni j t est entièrement défini par l’unique Découverte de chroniques pour la supervision de processus dynamiques paramètre λi j appelé le taux de Poisson qui correspond au nombre de transitions X tk−1 = i → X tk = j par unité de temps Dans ce cas la probabilité de transition dans la chaîne de Markov homogène est donnée par ∀i 6= j ∈ SM pi j = λi j∑ j 6=i λi j 8 Les contraintes temporelles sont évaluées à partir des délais d ok C j −d ok−1Ci où ok C j est l’occurrence d’un événement de la classe C j qui suit une occurrence d’un événement de la classe Ci Celle ci mène à considérer un nouveau type de séquence ωi− j contenant seulement les occurrences de deux classes Ci et C j dans ω Pour évaluer le délai moyen entre les occurrences successives des classes ok−1 Ci et ok C j dans ωi− j deux processus de poisson sont définis Ci et C j sont deux classes d’événements mutuellement indépendantes – Un processus de Poisson Ni− j t t ≥ 0 qui compte le nombre de sous séquences ω ′ = ok−1 Ci ok C j – Un processus de Poisson composé NDi− j t t ≥ 0 associé à chaque processus de Poisson Ni− j t t ≥ 0 pour le calcule des délais entre chaque deux instances successives ok−1 Ci ok C j ∀k = 1 m−1 ∀ω ′ ≡ ok−1 Ci ok C j ⊆ ωi− j NDi− j d ok C j = NDi− j d ok−1 C i +d ok C j −d ok−1 Ci 9 Le délai moyen Di j entre deux occurrences de classe Ci et C j dans ω est donné par Di j = E [ d ok C j −d ok−1 Ci ] = NDi− j tm Ni− j tm 10 Alors n× n−1 processus de Poisson composés NDi− j t t ≥ 0 sont utilisés pour évaluer les contraintes temporelles entre chaque couple de classes d’événements dans ω Par défini tion Di j est égale à 1λi j où λi j est l’intensité de la distribution exponentielle des temps inter occurrences entre les classes Ci et C j La contrainte temporelle entre chaque couple de classes Ci C j est directement déduite à partir de la surface de la loi exponentielle Dans notre appli cation les contraintes temporelles sont des intervalles de la forme [0 2 λi j] Ceci permet de couvrir 59% des occurrences des couples Ci C j 4 Algorithme BJT4R L’algorithme BJT4R Backward Jump with Timed constraints for Roads est un algorithme de découverte des chroniques liant deux classes d’événements dans une séquence d’événe ments discrets Le problème peut être formalisé de la manière suivante étant donnée une séquence d’événements discrets quelle sont les chroniques les plus probables liant une classe d’événement d’entrée à une classe d’événement de sortie La recherche se fait à partir de la classe de sortie en cherchant itérativement les prédécesseurs permettant d’obtenir les chro niques les plus probables Backward Jump Sa complexité algorithmique est exponentielle aux nombres des classes d’événement discret N Benayadi et al L’algorithme BJT4R basé sur l’approche stochastique est une extension de l’algorithme Viterbi pour la recherche des chroniques dans un espace d’états Markovien La relation de Chapmann Kolmogorov est utilisée pour définir la fonction de coût des chroniques afin de sélectionner les chroniques les plus probables Cet algorithme opère en deux étapes 1 Identification des chroniques sans contraintes temporelles l’idée est d’identifier un en semble des motifs séquentiels les plus probables liant une classe d’événement d’entrée à une classe d’événement de sortie Cette étape est basée sur l’utilisation de la matrice de probabilité de transition construite à partir de la séquence ω et l’utilisation de la relation de Chapmann Kolmogorov comme fonction de coût dans l’algorithme Viterbi 2 Établissement des contraintes temporelles en utilisant la superposition des processus de Poisson l’idée est d’utiliser directement les contraintes temporelles estimées à partir des processus de Poisson composés 4 1 Découverte des chroniques sans contraintes temporelles Soit X = X tk k ≥ 0 une chaîne de Markov homogène correspondant à la séquence ω Soit SM l’ensemble des états de X correspond à l’ensemble des classes d’événements discrets ayant une occurrence dans ω et P = [pi j] i j ∈ S2M sa matrice de transition des occurrences binaires de sous séquences Ci C j dans ω Une chronique liant l’état i0 à l’état ik dans X est une suite d’états δ i0 i1 ik telle que P[δ i0 i1 ik ] = P[X tk = ik X tk−1 = ik−1 X t0 = i0] > 0 11 La longueur d’une chronique |δ | = k est le nombre de relations binaires contenues dans δ i0 i1 ik Une chronique réduit à un seul état a une longueur de 0 Selon la propriété d’absence de mémoire de chaîne de Markov la probabilité P[δ i0 i2 ik ] d’une chronique δ i0 i2 ik est donnée par P[δ i0 i1 ik ] = P[X tk = ik X tk−1 = ik−1 X t1 = i1|X t0 = i0] = k ∏ n=1 P[X tn = in|X tn−1 = in−1] = k ∏ n=1 P[δ in−1 in ] 12 Comme la chaîne de Markov est homogène la probabilité P[δ i0 i1 ik ] de chronique δ i0 i1 ik est égale à la probabilité de transition d’un état i0 vers une autre état ik en passant par k−1 états intermédiaires Elle est donnée par le produit des probabilités des transitions d’un état à l’autre le long du chemin P[δ i0 i1 ik ] = k ∏ n=1 pin−1 in 13 Découverte de chroniques pour la supervision de processus dynamiques La probabilité pki j d’aller d’un état i vers l’état j en k transitions est égale à la somme de toutes les probabilités des chroniques de longueur k liant l’état i à l’état j donnée par la relation de Chapmann Komologrov pki j = P[X tk = j|X t0 = i] = ∑ ∀ i=i0 i1 i2 ik−1 ik= j ∈SM k ∏ n=1 P[X tn = in|X tn−1 = in−1] = ∑ ∀ i=i0 i1 i2 ik−1 ik= j ∈SM P[δ i0 i1 ik ] 14 Si la chaîne de Markov est homogène on a pki j = ∑ ∀ i=i0 i1 i2 ik−1 ik= j ∈SM k ∏ n=1 Pin−1 in 15 La relation 15 donne la probabilité totale de tous les chroniques possibles de longueur k menant de l’état i vers l’état j y compris les chroniques de faible probabilité qui correspondent à des comportements peu fréquents dans le processus modélisé par la chaîne de Markov L’objectif de l’algorithme est d’identifier les m chroniques les plus probables liant deux états i et j dans une chaîne de Markov X = X tk k≥ 0 construite à partir d’une séquence ω Déclaration 1 n langueur de chemin 2 δ k chemin de taille k qui se termine par l'état ik 3 ∑ k l’ensemble des chemins de taille k 4 ξ δ k la probabilité de chemin δ k Initialisation 5 δ 0 ← i 6 ∑ 0 ← δ 0 7 ξ δ 0 ← 0 Boucles 8 ∀ k = 1 …n 1 9 ∀ s ∈ SM {i j} 10 ∀ δ k 1 ∈ ∑ k 1 ∧ s ∉ δ k 1 11 ∑ k 1 ← ∑ k 1 δ k 1 12 δ k ← δ k 1 ∪ s 13 ξ δ k ← ξ δ k 1 × 14 si ξ δ k ≥ min_seuil alors ∑ k ← ∑ k ∪ δ k Finalisation 15 ∀ δ n 1 ∈ ∑ n 1 16 ∑ n 1 ← ∑ n 1 δ n 1 17 δ n ← δ n 1 ∪ i 18 ξ δ n ← ξ δ n 1 × 19 si ξ δ n > min alors ∑ n ← ∑ n ∪ δ n Terminer 20 return ∑ n ki s b n 1 i i b − FIG 2 – Génération des chroniques sans contraintes L’algorithme Fig 2 opère sur un graphe d’états fini dont les transitions sont étiquetées par une fonction de coût L’algorithme énumère tout les chroniques possibles menant d’un état d’entrée à un état de sortie et maintient seulement ceux qui maximise la fonction de coût Notre méthode de recherche est basée sur l’algorithme Viterbi comme un algorithme de recherche des chemins les chemins ayant une probabilité au dessous d’un certain seuil sont éliminées Pour N Benayadi et al chaque profondeur k ligne 8 l’algorithme cherche un sous ensemble d’états {s} ∈ SM ligne 10 14 vérifiant les conditions suivantes – Un état est ajouté s’il n’apparaît pas dans les chroniques sous la construction Cela si gnifie que l’algorithme interdit l’apparition de plus q’une classe d’événement dans une chronique ligne 10 – Un état est ajouté dans la chronique s’il conduit à un nouveau chronique de probabilité supérieure à un seuil minimal ligne 13 14 4 2 Établissement des contraintes temporelles La seconde phase de l’algorithme consiste à calculer les contraintes temporelles entre les classes d’événements des chroniques identifiées L’idée est d’utiliser directement les contraintes temporelles estimées à partir des processus de Poisson composés déduits de la superposition des processus de Poisson paragraphe 3 équations 9 et 10 La contrainte temporelle entre chaque couple de classes Ci C j est un intervalle de la forme [ 0 2λi j ] où λi j est le taux de Poisson qui correspond au nombre de transitions ok−1 Ci ok C j L’algorithme BJT4R est un des outils développés au sein du " Laboratoire ELP " un environnement Java dédié à l’analyse des séquences d’événements discrets Frydman et al 2001 La section suivante présente l’application industrielle de l’algorithme BJT4R pour la découverte des routes de fabrication des wafer dans la société STMicroelectronics 5 Application L’application proposée dans cette section concerne les routes de fabrication des wafers dans le site de production de STMicroelectronics Un wafer est une galette de silicium sur laquelle sont gravées des puces électroniques pour la télécommunication Le système de supervision de processus de fabrication génère une large quantité d’informations ≈ 10 000 alarmes par jour Ces informations décrivent les différentes étapes de processus de fabrication sous la forme d’occurrences d’événements discrets correspondant aux débuts et fins de chacun des traitements appliqués sur la plaque Cette suite de traitements appelée route transforme les plaques de silicium en wafers contenant des puces électroniques Une route de production d’un wafer particulier décrite par le système de supervision est donc une séquence d’occurrences d’événements discrets Deux classes d’événements spécifiques sont utilisées pour décrire le début et la fin d’une route La durée moyenne d’une route est d’environ 1 mois hors tests finaux et compte environ 250 occurrences de recettes Une occurrence d’événement discret peut être définit en 3 niveaux de granularités – Équipement Une occurrence est alors un couple e t où t est la date de début ou de fin de d’une recette effectuée sur l’équipement e Ce niveau de granularité est le plus bas Il permet de définir une route comme une suite d’occurrences d’équipements il existe 309 types classes d’équipements dans le site – Opération Une occurrence est le couple o t où la date t est le début ou la fin d’une re cette contenue dans une opération o A ce niveau de granularité intermédiaire une route est une suite d’occurrences d’opérations parmi les 1375 types classes d’opérations Découverte de chroniques pour la supervision de processus dynamiques – Recette A ce niveau de granularité le plus élevé une occurrence est un couple r t où t est la date de début de la recette r Dans ce cas une route est une suite d’occurrences de recettes parmi les 5189 types classes de recettes L’application présentée dans cet article concerne une première approche du problème nous nous sommes intéressées au niveau de granularité plus bas le niveau Équipement L’objectif est de montrer la faisabilité de l’approche aux processus de fabrication exploités sur le site Rousset de la société STMicroelectronics Dans cette application un modèle de chroniques est un ensemble de relations binaires les plus probables liant les équipements deux à deux en satisfaisant les contraintes temporelles Une contrainte temporelle est le temps moyen entre deux traitements successifs effectués sur les équipements de la relation binaire Pour appliquer l’approche stochastique deux conditions doivent être satisfaites 1 Les occurrences des événements doivent être indépendantes 2 Le processus de génération des occurrences doit se comporter comme une superposition de processus de Poisson Dans notre application ces conditions sont vérifiées La première est assurée par la dé finition du système de supervision les alarmes sont générées indépendamment les unes des autres Selon les experts de STMicroelectronics le taux d’occurrences des événements dis crets par jour est globalement stable durant toute la durée de fabrication sauf incidents ex ceptionnels La figure 3 montre six processus de Poisson correspondant à six équipements sélectionnés aléatoirement cela garantie la deuxième condition FIG 3 – Superposition des processus de Poisson La chaîne de Markov associée comprend 309 états i e 95481 transitions La figure 4 pré sente une partie de la matrice P de probabilité de transitions entre les classes d’événements dis crets La séquence d’événements analysée correspond à une superposition de 309× 309−1 = 95172 processus de Poisson composés Pour chaque processus de Poisson le temps inter occurrences est constant et correspond à la probabilité maximale de la loi exponentielle L’application de l’algorithme BJT4R à la séquence ω produit un graphe Fig 5 liant la classe d’événement d’entrée à la classe d’événement de sortie La figure 5 montre partiellement l’ensemble des chroniques les plus probables menant de l’équipement 1130 à l’équipement 1206 la classe d’événement spéciale 0 dénote le début de la route L’algorithme BJT4R est paramétré afin de produire les cinq chroniques les plus probables de longueur 15 Par souci de lisibilité seulement les débuts et les fins des chemins sont montrés dans la figure 5 N Benayadi et al FIG 4 – Matrice de Probabilité de Transition 1028 1129 1123 1124 1129 1206 0 52h37m1s   0 9h0m40s   0 50h0m57s   0 84h47m50s   0 84h47m50s   0 84h47m50s   0 1130 1261 1116 1038 1254 12661253 1262 0 0h0m3s   0 15h18m14s   0 62h1m48s   0 284h21m51s   0 170h23m50s   0 113h33m08s   0 92h37m41s   0 131h40m04s   0 131h40m04s   … 1028 1129 1123 1124 1129 1206 0 52h37m1s   0 9h0m40s   0 50h0m57s   0 84h47m50s   0 84h47m50s   0 84h47m50s   0 1130 1261 1116 1038 1254 12661253 1262 0 0h0m3s   0 15h18m14s   0 62h1m48s   0 284h21m51s   0 170h23m50s   0 113h33m08s   0 92h37m41s   0 131h40m04s   0 131h40m04s   … FIG 5 – L’ensemble des motifs produits par BJT4R 6 Discussions et Conclusions Cet article présente l’algorithme BJT4R pour la découverte des motifs temporels appelés chroniques à partir de données datées générées par le système de supervision des processus dynamiques Dans le domaine de l’extraction des motifs séquentiels la plupart des algorithmes proposés sont de type Apriori Like La complexité reste toujours un obstacle pour ces algo rithmes Notre approche d’extraction des motifs séquentiels se base sur la modélisation de la séquence sous la forme d’une chaîne de Markov L’estimation des probabilités des transition nécessite une seule passe dans la séquence la recherche des motifs est faite au niveau de la matrice de probabilité de transitions L’algorithme de recherche est inspiré de l’algorithme Vi terbi en utilisant l’équation de Chapmann Kolmogorov comme fonction de coût La méthode de découverte des chroniques est basée sur l’idée qu’une chronique est significative si sa pro babilité est supérieure à un certain seuil Par contre les contraintes temporelles sont déduites de la superposition des processus de Poisson associée à la chaîne de Markov L’application présenté dans cet article montre que l’algorithme est capable d’identifier des chroniques qui modélisent par partie différentes routes de fabrication des galettes de puces électroniques de la société STMicroelectronics Références Agrawal R T Imielinski et A Swami 1993 Mining association rules between sets of items in large databases Proceedings of the 1993 ACM SIGMOD International Conference on Management of Data 207–216 Agrawal R et R Srikant 1995 Mining sequential patterns Proceedings of the 11th International Conference on Data Engineering ICDEŠ95 3–14 Découverte de chroniques pour la supervision de processus dynamiques Dousson C et T V Duong 1999 Discovering chronicles with numerical time constraints from alarm logs for monitoring dynamic systems In D Thomas editor Proceedings of the 16th International Joint Conference on Artificial Intelligence IJCAI 99 1 620–626 Frydman C M L Goc N Giambiasi et L Torres 2001 Knowledge based diagnosis in sachem using devs models Special Issue of Transactions of SCS on Recent Advances in DEVS Methodology 18 148–159 Ghallab M 1996 On chronicles Representation on line recognition and learning Proc Principles of Knowledge Representation and Reasoning Aiello Doyle and Shapiro Eds Morgan Kauffman 597–606 Le Goc M et P Bouché 2005 Analyse stochastique de séquences d’événements discrets pour la découverte de signatures Revue des Nouvelles Technologies de l’Information Extraction et gestion des connaissances ISSN 1764 1667 1 103–114 Le Goc M P Bouché et N Giambiasi 2006 Devs a formalism to operationnalize chronicle models in the elp laboratory in DEVS06 DEVS Integrative M S Symposium Part of the 2006 Spring Simulation Multiconference SpringSim06 Van Braun Convention Huntsville Alabama USA 1 143–150 Mannila H 2002 Local and global methods in data mining Basic techniques and open problems 9th International Colloquium on Automata Languages and Programming Malaga Spain 2380 57–68 Mannila H H Toivonen et A I Verkamo 1997 Discovery of frequent episodes in event sequences Data Mining and Knowledge Discovery 259–289 Srikant R et R Agrawal 1996 Knowledge discovery from telecommunication network alarm databases Proceedings of the 5th International Conference on Extending Database Technology EDBTŠ96 3–17 Viterbi A J 1967 Error bounds for convolutional codes and an asymptotically optimum decoding algorithm IEEE Transactions on Information Theory 260–269 Summary This paper addresses the problem of discovering of temporal knowledge from the timed data contained in a monitoring database Contrary to the existing approaches which apply di rectly to the data our method of knowledge discovery is based on a global model built from the data The modeling approach said stochastic considers the timed data as occurrences of discrete event classes The temporal knowledge are represented under the form of chronicle models temporal patterns These models are elaborated from the representation of a a se quence under the form of a homogenous Markov chain and its corresponding superposition of Poisson processes The BJT4R algorithm identifies the most probable patterns linking two event classes and represents them under the form of a chronicle model This paper shows the first results of the application of this algorithm to the temporal data generated by the manufac turing process of a production of the STMicroelectronics Company 