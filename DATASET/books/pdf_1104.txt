 Analyse stochastique de séquences d'événements discrets pour la découverte de signatures Philippe Bouché Marc Le Goc LSIS UMR CNRS 6168 Domaine Universitaire St Jérôme 13397 Marseille cedex 20 France philippe bouche lsis org marc legoc lsis org Résumé Cet article concerne la découverte de signatures ou modèles de chroniques à partir d’une séquence d'événements discrets alarmes générée par un agent cognitif de surveillance Monitoring Cognitive Agent ou MCA Considérant un couple Processus MCA comme un générateur stochastique d’événements discrets deux représentations complémentaires permettent de caractériser les propriétés stochastiques et temporelles d’un tel générateur une chaîne de Markov à temps continu et une superposition de processus de Poisson L’étude de ces deux représentations duales permet de découvrir des signatures décrivant les relations stochastiques et temporelles entre événements dans une séquence Ces signatures peuvent alors être utilisées pour reconnaître des comportements spécifiques comme le montre l’application de l’approche à un outil de production industriel piloté par un système Sachem le MCA développé et utilisé par le groupe Arcelor pour aider au pilotage de ses outils de production 1 Introduction Nos travaux concernent les systèmes à base de connaissances de surveillance des processus dynamiques appelés Monitoring Cognitive Agent par la suite figure 1 Ces systèmes décrivent les évolutions du processus surveillé au moyen d’événements qui selon le contexte peuvent être qualifiés d’alarmes ou d’avertissements et adressés à l’Opérateur Le Goc et Frydman 2004 Les événements sont produits suivant un principe de discrétisation spatiale qui consiste à positionner le niveau d’un signal dans un ensemble d’intervalles de valeurs ou plages Un événement est généré lorsqu’un signal entre dans une nouvelle plage ELP Lab Expert Modèles de comportement Analyse événementielle hors ligne ELP Lab Expert Modèles de comportement Analyse événementielle hors ligne Operator Operator Operator Operator M C A Optimiser le comportement du processus In st ru m en ta tio n c ap te ur s In st ru m en ta tio n A ct io nn eu rs Événements Actions Données processusSy st èm e de s up er vi si on Operator Opérateur Pr oc es su s Génération d’événements en ligne Operator Operator Operator Operator M C A Optimiser le comportement du processus In st ru m en ta tio n c ap te ur s In st ru m en ta tio n A ct io nn eu rs Événements Actions Données processusSy st èm e de s up er vi si on Operator Opérateur Pr oc es su s Génération d’événements en ligne FIG 1 Monitoring Cognitive Agent RNTI E 3103 Analyse de séquences d'événements pour la découverte de signatures Les séquences d’événements générées selon ce principe sont porteuses d’information sur l’évolution du processus surveillé Notre objectif consiste à définir une méthode et un environnement logiciel le laboratoire ELP pour aider à extraire cette information et la représenter sous la forme de connaissances directement interprétables par un Expert Ce type de connaissances est en effet utile à l’activité de diagnostic des défauts de comportement du processus surveillé Dousson 1999 Notre approche du diagnostique est centrée sur la reconnaissance de séquences particulières d’événements signe de comportements problématiques Une séquence problématique est spécifiée sous la forme de signature un réseau où les nœuds sont des types d’événements et les liens des contraintes temporelles sur les événements Le langage ELP Event Language for Process a été conçu pour représenter ce type de connaissance Frydman et al 2001 La question adressée dans ce papier est la suivante étant donné un ensemble de comportements problématiques observés dans une série d’expériences et les séquences d’événements associées quelles sont les signatures qui caractérisent au mieux ces comportements Des questions similaires sont traitées dans le domaine du Data Mining avec des algorithmes tels que PASCAL Mannila 1995 Dans un article récent Manilla dresse un bilan des limites de ces algorithmes et en identifie le principal défaut les relations entre événements que ces algorithmes permettent de découvrir sont trop locales pour constituer une véritable représentation des séquences Mannilla 2002 Il invite donc à rechercher des algorithmes adoptant un point de vue plus global sur la recherche de signatures et propose d’investiguer la théorie des chaînes de Markov Nos travaux s’inscrivent dans cette perspective Ils reposent sur l’idée que sous certaines conditions le processus de génération des alarmes peut être considéré comme un générateur SDEG Pr MCA stochastique d’événement discret qui peut être modélisé sous les formes duales d’une superposition de processus de Poisson composés et d’une chaîne de Markov homogène à temps discret La section suivante définit la notion de signature puis introduit le modèle SDEG Pr MCA La section 3 décrit la démarche d’analyse d’une séquence d’événements discrets et l’algorithme BJT conçu pour la découverte de signatures Une application de cet algorithme à un processus industriel surveillé par un système Sachem est proposée en section 4 La conclusion de l’article propose un premier bilan de ces travaux 2 Modélisation 2 1 Notion de signature Un ensemble ‘Ψx’ de n seuils ψk k=1…n ψk∈ℜ pour une variable ‘x’ définit un ensemble de n+1 plages de valeurs intervalles noté Rx = {rl}l=0 … n tel que r0=[ ∞ ψ1[ rl=[ψl ψl+1[ et rn=[ψn +∞[ Un événement discret ‘ek’ est un triplet tk x i où tk∈Γ={ti}ti∈ℜ est la date de l’événement ‘x’ est le nom de la variable associée à ‘ek’ dont l’évolution temporelle est décrite par une fonction ‘ x ’ i e un signal de la variable réelle et ‘i’ est l’indice d’un intervalle dans ‘R t x’ i∈ℵ Un événement ‘ek’ est généré à chaque fois que ‘ tx ’ entre dans une nouvelle plage ixtertxrtxttRrt kkikikkkxik 11 ≡⇒∈∧∉<∃∈∀ℜ∈∀ −− 1 RNTI 1 RNTI E 3 104 Bouché et al En dénotant par ‘ E ’ l’ensemble des événements une fonction notée ‘d’ fournit la date d’un événement kkkk tedEixteEd =∈≡∀Γ→ 2 Le type ‘Ti’ d’un événement ‘ek≡ tk x i ’ est le couple x i et est dénoté ‘ek Ti’ Une “signature” est un ensemble de relations binaires entre des types d’événements de la forme R ei Ti eo To [τ τ+] telle que [ ] [ ] +−+− ∈−∧∧∈∀ℜ∈∀∈∀ ττττ 2 nnikonknio ededTeTeEeeTTT [ ] +−⇒ ττ ikon TeTeR 3 où ‘ei Ti’ resp ‘eo To’ dénote d’un événement d’entrée de type ‘Ti’ resp de sortie de type ‘To’ d ei < d eo et ‘[τ τ+]’ est la fenêtre temporelle pour observer l’occurrence d’un événement du type de sortie ‘eo To’ après l’occurrence de l’événement du type d’entrée ‘ei Ti’ de sorte que d eo d ei ∈[τ τ+] Une telle relation peut être décomposée en 2 relations • Une relation séquentielle RS ei Ti eo To qui est une relation orientée d’un type d’événement d’entrée vers type d’événement de sortie ikonSnkikonnkio TeTeRededTeTeEeeTTT ⇒≤∧∧∈∃∈∀ 4 • Une contrainte temporelle RT d ei Ti d eo To [τ τ+] où ‘d ek Tk ’ dénote la date de l’occurrence d’un evt de type ‘T ’ k [ ]+−∈−Γ∈∀ ττ iiooooii TedTedTedTed [ ]+− ⇒ ττ ooiiT TedTedR 5 Les éléments présentés dans cette section sont développés dans Le Goc 2005 Cette décomposition met en lumière les deux aspects complémentaires d’une signature L’idée est alors d’exploiter cette complémentarité pour faciliter l’étude des propriétés liant les événements discrets dans une séquence 2 2 Processus de Poisson Le principe de discrétisation spatiale possède des similarités avec l’approche dite POT Peak Over Thresholds qui montre que sous certaines conditions relativement faciles à vérifier en pratique la couple Processus MCA peut être considéré comme une superposition de processus de Poisson Lang et al 1999 Considérant une séquence ω= ek k=1…n d’événements discrets de la forme ek= tk x i les durées entre 2 événements successifs constituent un ensemble de variables aléatoires τ1 τ2 τ3 … telles que ∀ k≥1 P[τk > 0]=1 Le processus de comptage des événements de ω est le processus n t tel que ∀tk 1 tk n tk =n tk 1 +1 avec n 0 =0 Un processus de dénombrement est le processus aléatoire N t t ≥ 0 tel que ∀t ≥ 0 N t = max{n t ≥ 0 Sk ≤ t} 6 où ∀k ≥ 1 avec S∑ == k j S 1 jk τ 0=0 La durée écoulée entre deux événements successifs ek 1 et ek dans ω est donnée par τk = Sk Sk 1 Elle est appelée durée de vie d’un état du processus N t t ≥ 0 Lorsque les durées de vies τk sont des variables aléatoires indépendantes et identiquement distribuées le processus N t t ≥ 0 est un processus de renouvellement Lorsque les durées de vies sont distribuées selon une loi exponentielle de la forme λe λt λ étant une constante réelle positive le processus de renouvellement est un RNTI 1 RNTI E 3105 Analyse de séquences d'événements pour la découverte de signatures processus de Poisson homogène d’intensité λ La probabilité d'occurrence du prochain événement est alors donnée par P[N t = 1 ] = λt e λt 7 L'intensité λ correspond à la moyenne des durées de vie du processus de Poisson La loi exponentielle est dite ''sans mémoire'' au sens où l'espérance mathématique du temps d’attente du prochain évènement est une constante λ 1t tE E =>>−= τττ 8 2 3 Superposition et composition de processus de Poisson Considérons un processus de Poisson N t t≥0 d’intensité λ qui dénombre les événements dans une séquence ω= ek Ti k=1…n contenant m types d’événements m>0 tel que en notant pi la probabilité qu’une occurrence d’événement soit de type i • ∀i∈ℵ 0 < i ≤ m 0 < pi < 1 • p1 + p2 + … + pm = 1 Lorsque les attributions de type sont indépendantes les unes des autres un processus de Poisson d’intensité λi Ni t t ≥ 0 peut être définit pour chacun des types évènements dont au moins une occurrence est présente dans ω Dans ce cas le processus de Poisson N t t ≥ 0 est une superposition de m processus de Poisson indépendants Ni t t ≥ 0 De la même manière le processus de comptage des transitions entre événements de types Ti et Tj est une superposition de mx m 1 processus de Poisson Nij t t≥0 d’intensité λij Elle peut être représentée par une matrice Q=[qij] contenant les propriétés temporelles de paires d’événements successifs de types Ti et Tj 0qλq λq j ijijiiijij =−== ∑∑ ≠ et ij 9 Enfin un processus aléatoire X t t ≥ 0 avec est un processus de Poisson composé d’intensité λ et de distribution de gain F lorsque ∑ = = 1 tN j jYtX • N t t ≥ 0 est un processus de Poisson d’intensité λ • Y1 Y2 Y3 … sont des variables aléatoires indépendantes et identiquement distribuées selon F • la suite aléatoire Y1 Y2 Y3 … et le processus N t t ≥ 0 sont indépendants Ainsi 2 processus de Poisson Ni t t≥0 et Nj t t≥0 dénombrant respectivement les occurrences d’événements de type Ti et Tj mutuellement indépendants donnent naissance à 2 de processus de Poisson composés d’intensité λij=λi et λji=λj l’un ayant pour gain les durées écoulées entre 2 occurrences successives de types Ti et Tj l’autre ayant pour gain les durées écoulées entre 2 occurrences successives de types Tj et Ti Ces gains sont distribués selon une loi exponentielle de paramètre λij et λji Par conséquent m processus de Poisson Ni t t≥0 dénombrant les occurrences d’événements de type Ti mutuellement indépendants donnent naissance à m*m 1 processus de Poisson composés d’intensité λij=λi i≠j i=1…m j=1…m ayant pour gain les durées écoulées entre deux occurrences de types d’événement Ti et Tj distribuées selon une loi exponentielle de paramètre λij RNTI 1 RNTI E 3 106 Bouché et al 2 4 Chaînes de Markov Soit un espace d’état S={i}i=0 1 … m m∈ℵ m>0 Une chaîne de Markov à temps continu X= xk k>0 est une suite de variable aléatoire de S tel que ∀k∈ℵ k≥0 et ∀i i … i ∈S 0 1 k [ ] [ ] 10 11002211 txtxPtx tx txtxP −−−−−− ======= kkkkkkkkkk iiiiii L Cette condition est appelée ‘propriété de Markov’ la probabilité d’une transition d’un état ‘i’ à un état ‘j’ ne dépend que du fait que la chaîne soit dans l’état ‘i’ En particulier cela ne dépend pas du temps passé dans l’état ‘i’ Cette propriété correspond à la propriété d’absence de mémoire de la distribution exponentielle La théorie des processus de Poisson est ainsi liée à celle des chaînes de Markov Cassandras 2001 Le passage de l’un à l’autre de ces modèles s’effectue en considérant les événements dénombrés par un processus de Poisson comme marquant l’occurrence d’états dans une chaîne de Markov Appliqués aux événements générés par discrétisation spatiale l’espace d’état S est confondu avec l’ensemble T des types d’événements une transition d’état dans une chaîne de Markov x tk 1 =i x tk =j correspond à une séquence binaire ωij= ek 1 Ti ek Tj ⊆ω Lorsque le processus de comptage N t t ≥ 0 est un processus de Poisson homogène la chaîne de Markov correspondante est homogène ∀i j∈S et ∀k∈ℵ k>0 la probabilité conditionnelle P[x tk = j | x tk 1 = i] ne dépend pas de k La chaîne de Markov est alors entièrement définie par sa matrice des taux de transition Q=[qij] où ‘qij’ représente le taux de Poisson des transitions de l’état ‘i’ vers l’état ‘j’ et correspondent aux taux des processus de Poisson Nij t t≥0 d’intensité λij dans une séquence ω équation 9 Les probabilités de transition d’états sont alors données par la matrice des probabilités de transition P=[pij] 0p q q pi j ii ii ij ij =− =≠∀ et 11 La chaîne de Markov étant homogène la matrice P peut être estimée avec la méthode du ‘maximum de vraisemblance’ équation 12 comme dans le cas discret mais à la différence que dans une chaîne de Markov à temps continu il ne peut y avoir de transition d’un état sur lui même pii=0 Pour maintenir la dualité de la double représentation il est préférable d’associer une chaîne de Markov à temps discret à la superposition de processus de Poisson cette dernière étant un modèle à temps continu ∑∑ ∑ ∑ ∑ ∑ ∑ === − = j l lij l lij l lij l lij tx tx tx tx T T λ λ q q p j j ij ij ii ij ij 12 Ainsi à une séquence ω= ek Tk k=0 1 … m contenant m+1 événements de n types il est possible d’associer une chaîne de Markov à temps discret de n états X={xi}i=1…n et n*n transitions Xij={xij}i=1 n j=1…n La matrice P est constante et donnée dans l’équation 12 où ‘xij t ’ représente l’occurrence d’une transition de l’état i à l’état j de la chaîne de Markov à l’instant t Cette matrice contient les propriétés stochastiques des transitions d’état associées aux successions d’occurrence de types d’événements dans la séquence Les propriétés RNTI 1 RNTI E 3107 Analyse de séquences d'événements pour la découverte de signatures temporelles des transitions d’état sont représentées par une superposition de processus de Poisson composés paragraphe 2 3 En synthèse lorsque le dénombrement des événements générés par un couple Pr MCA peut être considéré comme une superposition de processus de Poisson le couple Pr MCA peut être modélisé sous la forme d’un générateur d’événement discret SDEG Pr MCA dont les propriétés stochastiques sont portées par la matrice P des probabilités de transition d’état d’une chaîne de Markov homogène à temps discret les propriétés temporelles étant représentées par une superposition de processus de Poisson composés Ces deux représentations duales peuvent être exploitées séparément pour découvrir des signatures de types d’événements équation 3 3 Algorithme BJT 3 1 Principes de base Le rôle de l’algorithme BJT est d’aider à découvrir les signatures d’un type d’événement dans une séquence ω= ek Tk k=0 1 … m contenant m+1 événements de n types Cette recherche est effectuée en 3 étapes • 1° Représentation des relations séquentielles sous la forme d’un arbre des transitions les plus probables Cette étape transforme la matrice P en un arbre dont les nœuds sont des types d’événements et les arcs des relations orientées d’un type d’événement Ti vers un type d’événement successeur Tj • 2° Estimation des contraintes temporelles Cette étape consiste à apposer des étiquettes sur les arcs contenant une mesure des durées moyennes entre occurrence de type Ti et occurrence de type Tj λij La troisième étape actuellement effectuée en dehors de l’algorithme BJT permet d’identifier les signatures comme une branche de l’arbre des transitions les plus probables à partir d’un test d’anticipation Ce test est basé sur le calcul du ratio entre le nombre de sous séquences respectant les contraintes séquentielles et temporelles d’une branche complète de l’arbre et le nombre de sous séquences respectant les contraintes de la même branche privée du type d’événement racine i e le type final Une branche sera considérée comme une signature potentielle si son taux d’anticipation est supérieur ou égal à 50 % Une fois une signature identifiée la séquence ω peut être représentée dans une forme simplifiée appelée séquence modèle ωS associée à une signature S Dans une séquence modèle les événements d’un type Ti se produisent tous les 1 λi Cette représentation facilite l’interprétation des signatures produites à l’aide de l’algorithme BJT 3 2 Identification des relations séquentielles Le nombre de transitions d’un état ‘i’ vers un état ‘j’ dans une chaîne de Markov homogène correspond au nombre d’occurrences de la sous séquence ek 1 Ti ek Tj dans une séquence ω de m+1 événements et inversement Trouver l’événement de type ‘Ti’ qui précède le plus souvent un événement de type ‘Tj’ dans une séquence ω correspond donc à trouver l’état ‘i’ dans la chaîne de Markov associée qui précède l’état ‘j’ avec la plus grande probabilité Le même raisonnement peut être fait pour l’état ‘i’ c’est à dire pour le type ‘Ti’ RNTI 1 RNTI E 3 108 Bouché et al La matrice P est utilisée pour trouver le chemin le plus probable menant à un événement de type ‘Tj’ Cette matrice est pondérée par la probabilité de l’occurrence d’une séquence ωij du type ek 1 Ti ek Tj afin de minimiser le problème de la dispersion des λij correspondant à une sur représentation de séquences ωij rares dans ω ∑∑∑ ∑∑ == i j l lij l lij l lij ij tx tx m t P ω ω 13 Le principe de l’algorithme consiste à transformer la matrice BJ=[bij]=[pii*P ωij ] en un arbre dont la racine est l’événement de type ‘Tj’ et les branches représentent la suite des transitions dans la chaîne de Markov menant à cette racine En notant ‘io’ l’état pour lequel on cherche le chemin n la profondeur de l’arbre δ j l’ensemble des prédécesseurs les plus probables de l’état j Σ k l’ensemble des états du chemin qui doit être trouvé à l’étape k l’algorithme est le suivant Initialisation 1 C = ∅ Σ 0 ={io} Boucle sur la profondeur de l’arbre 2 ∀k=1 … n 3 ∀j∈Σ k 1 4 δ j ←{i | bij∈MAXi bij ∧ xij∉C} 5 ∀i∈δ j C←C∪xij 6 Σ k ←δ j FIG 2 – Algorithme de transformation de BJ en arbre La largeur de l'arbre dépend de la manière dont la fonction ‘MAX’ est codée Dans notre cas l'arbre est développé afin d'avoir un nombre paramétrable de branches à chaque noeud 3 3 Identification des relations temporelles La seconde phase de l’algorithme ‘BJT’ exploite la représentation d’une séquence sous la forme d’une superposition de processus de Poisson composés pour déterminer les relations temporelles entre paires de types d’événements L’algorithme utilise n* n 1 automates indépendants figure 3 chacun étant consacré à la capture des transitions entre deux types d’événements Ti et Tj L’algorithme compte le nombre de transitions entre deux occurrences successives de type Ti et Tj nij dans une séquence et cumule les durées sij entre les événements correspondants Ces calculs sont effectués à chacune des transitions d’un état à l’autre La moyenne des temps entre deux occurrences d’événements de type ‘Ti’ et ‘Tj’ est simplement donnée par le rapport sij nij Cette moyenne est alors portée comme étiquette d’une relation séquentielle entre les types ‘Ti’ et ‘Tj’ sur l’arbre des relations séquentielles Une fois l’arbre des transitions les plus probables construit et complété par les relations temporelles le test d’anticipation permet de ne retenir que les branches susceptibles d’être des signatures Lorsqu’une signature a été identifiée la séquence ω peut être représentée sous sa forme simplifiée de séquence modèle RNTI 1 RNTI E 3109 Analyse de séquences d'événements pour la découverte de signatures Boucle sur les événements de ω 1 Lire ek Ti i est l’index de Ti dans Tω Mémorisation de la date de l’occurrence 2 di = d ek Pour chaque automate concerné par I Execution des fonctions de calcul 3 ∀j≠i si Qij=1 alors Calcul du nombre de transition 4 nji = nji + 1 Calcul du temps total des transitions 5 sji = sji + d ek dj Transition d’état 6 Qji = 1 Qij = 0 Qji i Boucle sur les événements de ω 1 Lire ek Ti i est l’index de Ti dans Tω Mémorisation de la date de l’occurrence 2 di = d ek Pour chaque automate concerné par I Execution des fonctions de calcul 3 ∀j≠i si Qij=1 alors Calcul du nombre de transition 4 nji = nji + 1 Calcul du temps total des transitions 5 sji = sji + d ek dj Transition d’état 6 Qji = 1 Qij = 0 Qji i Qji i Qij j Qij j Qij j FIG 3 – Algorithme d’estimation des relations temporelles 3 4 Séquence modèle d’une séquence associée à une signature Dans une séquence modèle ωS d’une séquence ω possédant k types d’événements associée à une signature S les événements sont répétés et distribués temporellement selon les intensités λi des processus de Poisson i e pour chaque type Ti les durées inter événements sont constantes et égales à 1 λi Pour un type Ti la date de la kiéme occurrence d’événements de type Ti est donnée par d ek Ti = k*1 λi Les occurrences sont ensuite ordonnées pour produire la séquence modèle ωS Ainsi par construction ωS possède une période calculée en cherchant un réel n unique tel que ∃n∈ℜ ∀i∈ℵ ∃mi∈ℵ λi*n = mi L’entier mi est le nombre d’occurrence du type Ti au cours de la période n Cela signifie que ‘ek Ti’ étant le kième événement de la période de la séquence ωS l’occurrence de date j*n +d ek Ti de ωS est aussi de type Ti ∀ek∈ωS ∀j∈ℵ ek Ti ⇒ ∃e’∈ωS e’ Ti ∧ d e’ = j*n +d ek 14 Cette propriété permet de représenter la séquence modèle ωS sur une période la suite étant obtenue par répétition Une séquence modèle ωS est une représentation approchée de la séquence ω correspondant à une signature S produite par l’aide de l’algorithme BJT Les différences observées entre ω et ωS proviennent de la modélisation par processus de Poisson notamment au niveau de l’estimation des taux de Poisson λi par le maximum de vraisemblance Mais les résultats produits par ce modèle sont suffisamment pertinents pour être acceptés par des experts ce qu’illustre la section suivante 4 Application L’application proposée dans cette section concerne un outil de production industriel1 piloté à l’aide d’un système Sachem le système de diagnostic à base de connaissance temps réel développé par le groupe Arcelor premier producteur mondial d’acier Sachem a été initialement conçu pour aider au pilotage de haut fourneau Parce qu’il est générique Le Goc and Gaéta 2003 Sachem a été décliné sur d’autres outils comme celui qui fait l’objet 1 Nous ne pouvons pas décrire le processus étudié pour des raisons de confidentialité RNTI 1 RNTI E 3 110 Bouché et al de cette étude Les systèmes Sachem sont basés sur le principe de la discrétisation spatiale Le Goc 2005 Les types d’événements sont désignés par un nombre entier appartenant à l’intervalle [1000 3000] 0 20 40 60 80 100 120 140 160 0 5000 10000 15000 20000 25000 30000 "1001" "1002" "1004" "1006" "1014" "1020" "1022" "1024" "1025" "1026" "1029" "1031" "1037" FIG 4 Courbes de Poisson associé à la séquence ω La séquence ω analysée couvre 19 jours du 25 04 2003 au 13 05 2003 où le processus de dénombrement des événements de ω se comporte comme un processus de Poisson d’intensité λ=1 4 événement heure soit un événement toutes les 40 minutes environ figure 4 Le type d’événement dont la signature est recherchée 1026 correspond à un enjeu en matière d’optimisation de la consommation énergétique 1001 1002 1004 1006 1014 1020 1022 1024 1025 1026 1029 1031 1037 1001 6 1 0 15 0 2 0 0 6 0 4 4 0 1002 3 1 1 4 10 0 0 0 0 0 2 3 0 1004 2 4 0 2 0 2 0 0 3 0 1 3 1 1006 11 5 7 35 1 15 1 6 18 5 19 23 0 1014 0 1 0 4 0 0 0 0 1 4 0 0 0 1020 1 2 2 18 0 5 0 1 6 3 5 10 0 1022 0 0 0 1 0 0 0 1 0 0 2 0 0 1024 1 0 2 3 0 3 0 0 2 1 6 7 0 1025 2 4 3 20 0 7 2 6 26 3 25 12 1 1026 0 0 0 9 0 4 0 1 3 0 0 2 0 1029 4 1 2 13 0 7 0 3 30 3 14 13 0 1031 8 5 2 21 0 6 1 7 19 1 11 36 2 1037 0 0 0 0 0 1 0 0 0 0 2 1 0 TAB 1 Matrice de dénombrements des transitions dans ω 1001 1002 1004 1006 1014 1020 1022 1024 1025 1026 1029 1031 1037 1001 14 665 0 4074 0 91 657 0 1 6295 0 0 14 665 0 6 5178 6 5178 0 1002 5 805 0 645 0 645 10 32 64 499 0 0 0 0 0 2 58 5 805 0 1004 3 44 13 76 0 3 44 0 3 44 0 0 7 7399 0 0 86 7 7399 0 86 1006 12 829 2 6507 5 1953 129 88 0 106 23 856 0 106 3 817 34 353 2 6507 38 276 56 088 0 1014 0 1 548 0 24 768 0 0 0 0 1 548 24 768 0 0 0 1020 0 2921 1 1683 1 1683 94 632 0 7 3018 0 0 2921 10 515 2 6287 7 3018 29 207 0 1022 0 0 0 3 87 0 0 0 3 87 0 0 15 48 0 1024 0 6192 0 2 4768 5 5728 0 5 5728 0 0 2 4768 0 6192 22 291 30 341 0 1025 0 5578 2 2313 1 2551 55 783 0 6 8335 0 5578 5 0205 94 274 1 2551 87 161 20 082 0 1395 1026 0 0 0 65 993 0 13 036 0 0 8147 7 3326 0 0 3 2589 0 1029 2 752 0 172 0 688 29 068 0 8 4279 0 1 548 154 8 1 548 33 712 29 068 0 1031 8 3253 3 2521 0 5203 57 367 0 4 683 0 1301 6 3741 46 96 0 1301 15 74 168 59 0 5203 1037 0 0 0 0 0 3 87 0 0 0 0 15 48 3 87 0 0 TAB 2 Matrice BJ de la séquence ω RNTI 1 RNTI E 3111 Analyse de séquences d'événements pour la découverte de signatures La séquence ω contient 646 événements de 13 types et concerne 11 variables La chaîne de Markov associée comporte donc 13 états et 156 transitions potentielles Le tableau 1 présente la matrice de dénombrement des transitions d’états pour la séquence ω le tableau 2 la matrice BJ par souci de lisibilité toutes les valeurs bij ont été multipliées par 10 000 L’application de l’algorithme ‘BJT’ à la séquence ω produit l’arbre de la figure 5 La première branche de cet arbre peut être retenue comme une signature du type d’évènement 1026 car elle possède un taux d’anticipation de plus de 63% sur les 11 sous séquences de ω respectant la signature tronquée de son nœud final i e la branche {1004 1031} > 1002 > 1014} 7 respectent la signature complète FIG 5 Arbre du type d’événement ‘1026’ De plus cette signature explique 7 des 17 occurrences d’événements 1026 c’est à dire 41% des occurrences Cette mesure est appelée taux de couverture d’une signature Elle signifie qu’en l’occurrence au moins 2 autres signatures sont nécessaires pour décrire les liens entre les événements de type 1026 et les autres types d’événements dans ‘ω’ evt 1006 1031 1029 1020 1001 1002 1026 1004 1014 Lambdas 7 89 6 69 5 85 4 3 2 03 1 08 1 21 0 84 0 48 Nombre 789 669 585 430 203 108 121 84 48 TAB 3 Intensités des processus de Poisson La séquence modèle ω1026 de ω pour la signature du type 1026 est calculée à partir des intensités des processus de Poisson mesurés sur la séquence ω Tableau 3 La période de la séquence modèle ω1026 est de 100 jours et possède 3037 événements L’application de l’algorithme BJT sur cette séquence conduit par construction à la même signature pour le type 1026 ω1026 débute de la manière suivante les noms des variables ont été omis { 1006 0 1267 1031 0 1494 1029 0 1709 1020 0 2325 1006 0 2538 1031 0 2988 1029 0 3418 1006 0 3801 1031 0 4482 1020 0 465 1001 0 4926 1006 RNTI 1 RNTI E 3 112 Bouché et al 0 5068 1029 0 5127 1031 0 5976 1006 0 6335 1029 0 6836 1020 0 6975 1031 0 747 1006 0 7602 1026 0 8403 1029 0 8545 1006 0 8869 1031 0 8964 1002 0 9259 … } Ces résultats ont été présentés et validés par un expert en conduite du processus étudié Des résultats similaires ont été obtenus sur un haut fourneau piloté par Sachem Ils montrent que l’approche proposée produit des résultats opérationnels sur une application industrielle 5 Conclusion L’approche proposée dans cet article considère un couple processus MCA comme un générateur SDEG Pr MCA stochastique d'événements discrets typés qui peut être modélisé sous les formes duales d’une superposition de processus de Poisson composés et d’une chaîne de Markov homogène à temps discret L’intérêt de cette approche réside dans la séparation des études des propriétés séquentielles et temporelles d’une séquence d’événements produit par un SDEG Pr MCA les relations séquentielles entre événements sont tirées de l’exploitation des propriétés stochastiques de la chaîne de Markov alors que les relations temporelles sont estimées à partir des propriétés temporelles des processus de Poisson L'algorithme BJT présenté dans cet article exploite cette dualité d’une part en transformant la matrice des probabilités de transition dans une chaîne de Markov en un arbre décrivant les différents chemins à probabilité maximale liant les types d’événements entre eux et d’autre part en complétant cet arbre par les contraintes temporelles tirées de la représentation par processus de Poisson Un simple test d’anticipation permet de sélectionner dans cet arbre les branches susceptibles d’être des signatures d’un type d’événement Cette approche a été validée sur un processus industriel surveillé par un système Sachem L'algorithme BJT est un des outils développés et intégrés au sein du laboratoire ELP un environnement Java dédié à l’analyse des séquences d’événements discrets générés par les systèmes Sachem Références Aycard O Laroche P Charpillet F 1998 Mobile Robot Localization in Dynamic Environments using Place Recognition the 1998 IEEE International Conference on Robotics and Automation ICRA'98 pages 3135 3140 Cassandras C G and S Lafortune 2001 Introduction to dicrete event systems Kluwer Academic Publishers Cocozza Thivent C 1997 Processus stochastiques et fiabilité des systèmes Edition SPRINGER Dousson C and Vu Duong T 1999 Discovering Chronicles with Numerical Time Constraints from Alarms Logs for Monitoring Dynamic Systems the 1 th International Join conference on Artificial Intelligence IJCAI'99 pp 620 626 Frydman C Le Goc M Torres L and Giambiasi N 2001 Knowledge Based diagnosis in SACHEM using DEVS models Special Issues of Transaction of Society for Modeling and Simulation International SCS on Recent Advances in DEVS Methodology Tag Gon Kim Ed Vol 18 N°3 p 147 158 RNTI 1 RNTI E 3113 Analyse de séquences d'événements pour la découverte de signatures RNTI 1 Lang M Ouarda T B M J and Bobée B 1999 Towards operational guidelines for over threshold modelling Journal of hydrology 225 p103 117 Edition ELSEVIER Le Goc M and Gaéta M 2003 Modeling Structures in Generic Space a Condition for Adaptiveness of Monitoring Cognitive Agent Journal of Intelligent and Robotic Systems Theory and Applications Kluwer Academic Publishers 2003 Le Goc M and Frydman C 2004 The Discrete Event Concept as a Paradigm for the “Perception Based Diagnosis” of Sachem Journal of Intelligent and Robotics Systems Kluwer Academic Publishers Le Goc M 2005 Sachem a Real Time Intelligent Diagnosis System based on the Discrete Event Paradigm To appear in Simulation Transaction of the Society for Modelling and Simulation International Mannila H Toivonen H and Verkamo I 1995 Discovering Frequent Episodes in Sequences First International conference on Knowledge Discovery and Data Mining KDD’95 pp 210 215 Mannila H 2002 Local and Global Methods in Data Mining Basic Techniques and Open Problems 29th International Colloquium on Automata Languages and Programming Volume 2380 pp 57 68 Rabiner L R 1989 A tutorial on Hidden Markov Models and selected applications in Speech Recognition Fellow IEEE 77 2 P257 289 Reinert G Schbath S 1998 Compound Poisson and Poisson process approximations for occurrences of multiple words in Markov chains Journal of Computational Biology Volume 5 Number 2 Summary This paper aims at showing a method to the discovery of signature or model of chronicles starting from a discrete event sequence alarms generated by a Monitoring Cognitive Agent "MCA" in the continuation Regarding a couple process MCA as a stochastic generator of discrete events two complementary representations make it possible to characterize the stochastic and temporal properties of such a generator a chain of Markov at continuous time and a superposition of processes of Poisson The study of these two dual representations makes it possible to discover "signatures" describing the stochastic and temporal relations between events in a sequence These signatures can then be used to recognize specific behaviours as the application of the approach shows it to an industrial production equipment controlled by a Sachem system the MCA used by the Arcelor group to help the monitoring of its production equipments RNTI E 3 114