 Raisonner sur une ontologie cartographique pour concevoir des légendes de cartes Catherine Dominguès Olivier Corby Fayrouz Soualah Alila IGN 73 avenue de Paris 94165 Saint Mandé cedex catherine domingues ign fr recherche ign fr Centre de recherche Inria Sophia Antipolis Méditerranée 2004 route des Lucioles BP 93 06902 Sophia Antipolis Cedex Olivier Corby sophia inria fr Université Paris Dauphine Master ISI Bureau P619 Place du Maréchal de Lattre de Tassigny 75775 Paris Cedex 16 soualahfayrouz yahoo fr Résumé Concevoir une carte géographique plus particulièrement sa légende exige des compétences spécifiques L'objectif de ce papier est de présenter une base de connaissances destinée à aider tout utilisateur à concevoir une ou plu sieurs légendes adaptées à son besoin et conformes aux règles de cartographie La base de connaissances est formée d'une ontologie de la cartographie nommée OntoCarto d'un corpus de règles OntoCartoRules et d'un moteur de raison nement Corese Dans ce papier chaque demande de conception de légende est vue comme une instanciation particulière de l'ontologie associée à une sélection de règles pertinentes dans le corpus de règles sur laquelle Corese va raisonner pour construire des légendes adaptées à la configuration spécifique traitée La conception de la légende s'appuie sur la définition de deux hiérarchies d'objets géographiques et cartographiques Les principes de fonctionnement de Corese sont présentés Un prototype a été implémenté et des extraits des résultats sont montrés 1 Introduction L'accessibilité des données géographiques et la diffusion d’outils de représentation ont bénéficié du développement d’internet et ont rendu possible la conception de cartes sur mesure Parce qu'elle illustre les intentions de son concepteur la carte est censée délivrer un message à ses lecteurs Les règles de cartographie et de sémiologie cartographique visent à garantir que ce message sera correctement interprété Cependant il arrive que ces cartes sur mesure conçues sans compétences en cartographie soient de mauvaise qualité esthétiquement pauvres et surtout que le message censé être délivré par la carte mal construit soit mal compris par les lecteurs Ainsi créer une base de connaissances sur laquelle construire des applications d'aide 269 Raisonner pour concevoir des légendes de cartes FIG 1 – Schéma de fonctionnement de la base de connaissances à la construction de cartes géographiques sur mesure constitue un objectif pertinent pour Smith 2010 ou Couclelis 2010 La base de connaissances proposée ici voir figure 1 est formée d'une ontologie de la cartographie nommée OntoCarto d'un corpus de règles OntoCartoRules et d'un moteur de raisonnement Corese Cette base de connaissance contient les ressources nécessaires pour construire des applications d’aide à la conception de légendes de cartes sur mesure L'objectif est de raisonner à l'aide de Corese sur la demande du concepteur Le raisonne ment s'appuie sur les règles contenues dans OntoCartoRules et construites avec les concepts de l'ontologie le résultat du raisonnement prend la forme de légendes conformes à la fois aux règles de cartographie et de sémiologie cartographique et à celles traduisant les intentions exprimées par le concepteur Le choix de modélisation est de considérer chaque demande de légendes comme une instanciation particulière de l'ontologie associée à une sélection de règles d'OntoCartoRules pertinentes dans ce cas particulier et sur lesquelles Corese va raisonner Cette modélisation vise à utiliser la puissance de formalisation de l’ontologie en implémen tant les règles de cartographie et sémiologie cartographique qui ne peuvent être transgressées comme des relations entre concepts Le raisonnement conduit par Corese s’appuie ensuite sur les propriétés des relations décrites dans l’ontologie pour prendre ou non en considération les préférences du concepteur La construction de légende s'articule sur le concept de légende sa définition dans OntoCarto est exposée dans la section 2 Le raisonnement est conduit par le moteur Corese qui est présenté dans la section 3 L'organisation de la base de connaissances est validée par la construction d'un prototype qui est décrit dans la section 4 2 La légende dans OntoCarto Une carte est produite par l'application d'une symbolisation à un ensemble de données géo référencées Son objectif est de rendre compte du message composé par le concepteur de la carte à l'adresse de ses lecteurs Le concepteur doit traduire graphiquement ses intentions ce qui passe entre autres opérations par la sélection des données pertinentes et la définition d'une 270 C Dominguès et al FIG 2 – Les deux hiérarchies d'objets géographiques et d'objets de la légende A chaque objet de ces hiérarchies correspond une classe de l'ontologie OntoCarto symbologie adaptée aux données et à ses intentions La légende d'une carte permet de faire le lien entre les objets géographiques ou thématiques qui peuplent l'espace géographique et les objets cartographiques qui sont représentés sur la carte La création de légendes adaptées aux intentions du concepteur s'appuie sur la définition de deux hiérarchies symétriques d'objets géographiques et cartographiques représentées sur la figure 2 L'ensemble des données géo graphiques est structuré en domaines géographiques un domaine est composé de plusieurs thèmes un thème de plusieurs sous thèmes un sous thème de plusieurs objets géographiques La structuration des objets de la légende est symétrique à cette première hiérarchie Les seuls objets qui supportent la symbolisation sont les lignes de légende les autres niveaux servent seulement à structurer les objets géographiques ou cartographiques La structuration des ob jets n'est pas intrinsèque à l'espace géographique cartographié mais reflète les intentions du concepteur D’autre part le message de la carte est articulé sur les relations sémantiques entre objets mises en place par le concepteur La sémiologie cartographique dénombre trois rela tions association différentiation et ordre et énonce des règles qui permettent de les traduire dans les symboles associés aux objets de la carte La définition du symbole s'appuie sur les six variables visuelles de Bertin 1967 taille valeur texture couleur orientation et forme Défi nir un symbole signifie donc donner une valeur à chacune de ces variables visuelles Celles ci ont été interprétées et modélisées dans OntoCarto L'ensemble des couleurs utilisables est en théorie infini cependant pour faciliter le raisonnement l'ensemble des couleurs manipulables a été restreint au cercle chromatique défini par Chesneau 2006 Dans le prototype proposé en section 4 seules les variables visuelles Teinte et Valeur sont manipulées par les règles d’Onto CartoRules 3 La conception de légendes avec Corese La conception de légendes s'effectue grâce au moteur Corese qui raisonne sur les concepts d'Ontocarto et les règles d'OntoCartoRules Il s'agit de définir une teinte et une valeur pour chaque ligne de la légende le raisonnement s'appuyant sur la structuration des objets et les re lations sémantiques Corese Corby et al 2004 est une plate forme de recherche pour le Web 271 Raisonner pour concevoir des légendes de cartes sémantique implémentant les langages RDF RDFS SPARQL 1 1 Query Update Il propose également des règles d'inférence construites sur les requêtes SPARQL de type construct where La conception de légende de carte est un problème de design pour lequel le paradigme generate and test est communément utilisé On utilise des connaissances pour engendrer des solutions partielles generate et d'autres connaissances pour évaluer la qualité de ces solutions test Les solutions partielles font l'objet de raffinement successifs qui s'ils sont évalués favorable ment aboutissent à des solutions complètes Les essais sont réalisés dans des contextes qui permettent de décrire les variantes par exemple tel objet cartographique peut être vert ou bien bleu Les contextes qualifiés ici d’intermédiaires contiennent les décisions successives qui ont été prises pour y arriver Ils peuvent être reliés par une relation de raffinement re présentant la succession des étapes du raisonnement Cette relation permet de naviguer dans la structure d'arbre d'états ainsi construite L'application de cartographie présentée ici repose sur l'utilisation de graphes nommés RDF named graphs qui permettent de représenter les contextes de conception En effet SPARQL Harris et Seaborne 2011 et RDF permettent la gestion d'un ensemble de graphes appelé Dataset Un Dataset contient un graphe par défaut default graph et un ensemble de graphes nommés A chaque graphe nommé est associé un URI qui permet de le désigner sans toutefois qu'il y ait de relation sémantique formelle entre l'URI et le graphe SPARQL possède des énoncés graph pattern from from named permet tant de préciser le Dataset que l'on souhaite interroger Par exemple l'énoncé suivant recherche dans quels graphes g les cartes map ont une couleur col graph g { map i hasColor col} Les graphes nommés permettent entre autres de contextualiser les informations c'est à dire de définir une portée scope dans laquelle les énoncés sont vrais Il est donc possible de gérer des solutions alternatives afin de les comparer et les évaluer Dans l'application présen tée ici les contextes intermédiaires sont engendrés avec SPARQL 1 1 Update Gearon et al 2011 qui permet de créer et gérer des graphes nommés via la directive insert L'exemple suivant montre la création d'un état représenté par le graphe nommé g2 de type Alternative il raffine un état g1 et contient des informations sur la teinte possible d'un objet f PREFIX i < ign fr cartograph > INSERT { g2 rdf type i Alternative g2 i refine g1 GRAPH g2 { f i hasColor cf } } WHERE { SELECT ext uri g1 as g2 WHERE { GRAPH g1 { f a i Object minus { f i hasColor c} } i Object i hasColor cf } } 272 C Dominguès et al En exécutant une séquence de ces requêtes un arbre de raffinement de solutions partielles est construit D'autres requêtes ainsi que des règles permettent ensuite d'évaluer la qualité des solutions construites par exemple en vérifiant la qualité du contraste entre teintes La base de connaissances cartographiques contient un ensemble de requêtes et de règles qu'il faut exécuter pour résoudre le problème de conception Ces requêtes traduisent des pré férences du concepteur de la carte Pour le moment ces requêtes sont prédéfinies mais elles devront être générées à la volée à partir de la saisie des préférences du concepteur de la carte 4 Mise en place du raisonnement à l’aide du prototype Une application JAVA a été écrite pour faciliter la visualisation des légendes construites par Corese Elle lance Corese puis transforme les graphes produits en légendes Un prototype a été construit pour valider l’organisation de la base de connaissances Le concepteur utilise une interface de saisie pour décrire ses intentions structure des objets re lations sémantiques entre objets éventuelles préférences de teintes pour symboliser certains thèmes Dans le cas particulier testé l'intention est d'organiser les objets géographiques à re présenter en quatre thèmes bâti hydrologie réseau routier et zone arborée Ces quatre thèmes sont chacun en relation de différence avec les trois autres L'objet réseau routier est structuré en trois lignes de légendes ordonnées par ordre décroissant zone arborée est structuré en deux lignes non ordonnées Les autres niveaux par référence à la hiérarchie de la figure 2 sont absents Corese s’appuie sur les relations d’Ontocarto pour traduire la relation d’association par une absence de contraste de teintes la différenciation par un contraste de teintes et l’ordre par l’ordre des valeurs d’une même teinte voir Dominguès et al 2009 Pour ce cas particu lier Corese a construit plus de cinq millions de légendes différentes dont quelques unes sont affichées dans la figure 3 Le nombre de légendes produites est très élevé parce que Corese explore toutes les possibilités du cercle chromatique pour symboliser les thèmes Route et Bâti pour lesquels des préférences de teintes n’ont pas été exprimées Pour le thème Route les va leurs décroissantes de la teinte rouge pour les exemples 1 et 2 violet pour les exemples 3 et 4 montrent l'ordre décroissant des routes Enfin les solutions 3 et 4 diffèrent seulement par la valeur de la ligne de légende réseau secondaire Le prototype a permis de vérifier que la modé lisation des relations sémantiques entre objets géographiques par des relations entre concepts était pertinente il faut maintenant augmenter le nombre de contraintes prises en compte et raffiner l’expression des règles pour que le prototype devienne opérationnel dans des cas réels Références Bertin J 1967 Sémiologie graphique les diagrammes les réseaux les cartes Chesneau E 2006 Propositions méthodologiques pour l’amélioration automatique des contrastes de couleur application aux cartes de risque Cybergéo Corby O R Dieng Kuntz et C Faron Zucker 2004 Querying the semantic web with corese search engine In ECAI Volume 16 pp 705 Citeseer 273 Raisonner pour concevoir des légendes de cartes FIG 3 – Quelques propositions de légendes produites par Corese Couclelis H 2010 Ontologies of geographic information International Journal of Geogra phic Information Science 24 12 1785–1809 Dominguès C S Christophe et L Jolivet 2009 Connaissances opérationnelles pour la conception automatique de légendes de cartes 20èmes Journées Francophones d’Ingénierie des Connaissances Hammamet Tunisie Gearon P A Passant et A Polleres 2011 SPARQL 1 1 Update Working draft W3C Harris S et A Seaborne 2011 SPARQL 1 1 Query Language Working draft W3C Smith R A 2010 Designing a cartographic ontology for use with expert systems Procee dings of the 18th AutoCarto Conference Orlando USA Summary Making a map especially a legend map requires specific ability This paper aims at show ing a cartography knowledge base It is designed to help the map maker to make legends which comply with cartography rules and suitable to his her intentions The knowledge base is made up of the OntoCarto ontology the OntoCartoRules rule corpus and Corese an ontology based search engine In this paper every legend design query is interpreted as a specific state of Onto Carto with relevant rules selected from OntoCartoRules according to which Corese can think logically to make legends suitable to the specific configuration The operating principles of the knowledge base are explained A prototype has been implemented and results are shown 274 